<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/annotator.min.css">
</head>
<bodY>
<h1>This is a test</h1>
<div id="testContent">
    <p class="char1">Eh ! Oui, vraiment. Aujourd'hui, à cinq heures du
matin, moi et ma femme, *Madame *Pinchon, nous étions hors du lit,
parce qu'à la ferme on dort aussi bien qu'au château ; mais l'on dort
plus vite, excepté le dimanche ; car on fait son dimanche.  Mais
pardon, *Mademoiselle *Suzette, ce sont là des détails de ménage. Ma
petite femme m'a dit comme ça : " *Pinchon, je vais au marché, où tu
viendras me rejoindre. Toi, pendant ce temps-là, va compter avec m le
comte, et lui porter le prix de ses fermages ; " car, afin que vous le
sachiez, c'est aujourd'hui la toussaint.</p>

</div>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="js/annotator-full.min.js"></script>
<script>
/*
var app = new annotator.App();
app.include(annotator.ui.main);
app.include(annotator.storage.http);
app.start();
*/
// https://docs.djangoproject.com/en/1.10/ref/csrf/
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
});

jQuery(function ($) {
    var content = $('#testContent').annotator();
    content.annotator('addPlugin', 'Tags').annotator('addPlugin', 'Store', {
        prefix: '/store',
        annotationData: {
            'uri': 'http://grvsmth.pythonanywhere.com/static/test.html'
        },
        loadFromSearch: {
            'limit': 20,
            'uri': 'http://grvsmth.pythonanywhere.com/static/test.html'
        }
    });
});
</script>
</bodY>
</html>